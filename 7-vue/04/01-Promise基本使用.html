<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>

  <script type="text/javascript">
    //promise 主要解决异步深层嵌套的问题

    /*
     1. Promise基本使用
      使用new来构建一个Promise  Promise的构造函数接收一个参数，是函数，并且传入两个参数：
      resolve，reject， 分别表示异步操作执行成功后的回调函数和异步操作执行失败后的回调函数
    */

    var p = new Promise(function (resolve, reject) {
      //2. 这里用于实现异步任务  setTimeout
      setTimeout(function () {
        var flag = true;
        if (flag) {
          resolve('正常情况');
        } else {
          reject('异常情况');
        }
      }, 100);
    });

    //  3 Promise实例生成以后，可以用then方法指定resolved状态和reject状态的回调函数 
    //  在then方法中，你也可以直接return数据而不是Promise对象，在后面的then中就可以接收到数据了
    p.then(function (data) {
      console.log(data)
      console.log('111111');
    }, function (info) {
      console.log(info)
      console.log('222222');
    });
  </script>
</body>

</html>